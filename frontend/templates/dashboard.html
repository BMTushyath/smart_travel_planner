{% extends "base.html" %}

{% block content %}
<div class="dashboard-container">
    <h2 class="dashboard-title">Welcome to Your Smart Dashboard</h2>

    <div class="dashboard-grid">
        <!-- Option 1: Vehicle Details -->
        <div class="card vehicle-card">
            <div class="card-header">
                <h3><i class="fas fa-car"></i> My Fleet </h3>
            </div>
            <div class="card-body">
                <p class="card-desc">Manage your fleet. Add vehicles to calculate accurate costs.</p>
                <form id="vehicle-form" class="modern-form">
                    <div class="form-group">
                        <input type="text" id="v-name" placeholder="Vehicle Name (e.g., Tesla Model 3)" required>
                    </div>
                    <div class="form-group">
                        <input type="number" step="0.1" id="v-mileage" placeholder="Mileage (km/l or km/kWh)" required>
                    </div>
                    <div class="form-group">
                        <label for="v-type">Vehicle Category</label>
                        <select id="v-type">
                            <option value="fuel">Fuel (Petrol/Diesel/CNG)</option>
                            <option value="ev">Electric (EV)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="v-fuel">Specific Fuel/Energy Type</label>
                        <select id="v-fuel">
                            <option value="petrol">Petrol</option>
                            <option value="diesel">Diesel</option>
                            <option value="cng">CNG</option>
                            <option value="ev">Electricity (kWh)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary">Save Vehicle</button>
                </form>
                <div id="vehicle-msg" class="msg-box"></div>

                <div class="vehicle-list-container">
                    <h4>Your Vehicles</h4>
                    <ul id="vehicle-list" class="vehicle-list">
                        <!-- Vehicles will be loaded here -->
                    </ul>
                </div>
            </div>
        </div>

        <!-- Option 2: Plan Your Trip (Map & Navigation) -->
        <div class="card planner-card">
            <div class="card-header">
                <h3><i class="fas fa-map-marked-alt"></i> Plan Your Trip</h3>
            </div>
            <div class="card-body">
                <p class="card-desc">Find the best route and time to leave.</p>
                <form id="planner-form" class="modern-form">
                    <div class="form-group">
                        <input type="text" id="plan-start-loc" placeholder="Start Location" required>
                    </div>
                    <div class="form-group">
                        <select id="plan-vehicle-id" required>
                            <option value="" disabled selected>Select a Vehicle</option>
                            <!-- Options populated via JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <input type="text" id="plan-end-loc" placeholder="Destination" required>
                    </div>

                    <div class="form-group">
                        <label for="plan-date">Travel Date</label>
                        <input type="date" id="plan-date" required>
                    </div>
                    <label>Preferred Time Window (Hours)</label>
                    <div class="time-inputs">
                        <input type="number" id="plan-start-time" placeholder="Start (e.g. 8)" min="0" max="23"
                            required>
                        <span>to</span>
                        <input type="number" id="plan-end-time" placeholder="End (e.g. 12)" min="0" max="23" required>
                    </div>
                    <button type="submit" class="btn-secondary">Find Best Route</button>
                </form>

                <div id="map" class="map-container hidden"></div>

                <div id="planner-result" class="result-box hidden"></div>
                <a id="nav-link" href="#" target="_blank" class="btn-accent hidden"
                    style="display: block; text-align: center; margin-top: 1rem;">Start Live Navigation</a>
            </div>
        </div>

        <!-- Option 3: Fuel/EV Charge Predictor -->
        <div class="card cost-card">
            <div class="card-header">
                <h3><i class="fas fa-calculator"></i> Fuel/EV Charge Predictor</h3>
            </div>
            <div class="card-body">
                <p class="card-desc">Estimate trip costs using real-time fuel prices.</p>
                <form id="trip-form" class="modern-form">
                    <div class="form-group">
                        <select id="trip-vehicle-id" required>
                            <option value="" disabled selected>Select a Vehicle</option>
                            <!-- Options populated via JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <input type="text" id="trip-start" placeholder="Start Location" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="trip-end" placeholder="Destination" required>
                    </div>
                    <button type="submit" class="btn-accent">Calculate Cost</button>
                </form>
                <div id="trip-result" class="result-box hidden"></div>
            </div>
        </div>

        <!-- Option 4: Traffic Alert & Insights -->
        <div id="traffic-alert-card" class="card traffic-card">
            <div class="card-header">
                <h3><i class="fas fa-search"></i> Native Guru</h3>
            </div>
            <div class="card-body">
                <p class="card-desc">Real-time alerts and smart alternatives for your travel.</p>
                <div id="traffic-alert-content">
                    <div id="date-insight-container" class="date-insight-box hidden"></div>
                    <div class="loader-placeholder">Calculate a route to see traffic insights.</div>
                </div>
            </div>
        </div>

        <!-- Option 5: Weather Engine -->
        <div id="weather-engine-card" class="card weather-card">
            <div class="card-header">
                <h3><i class="fas fa-cloud-sun"></i> Weather Engine</h3>
            </div>
            <div class="card-body">
                <p class="card-desc">Weather insights for your travel window — stay prepared!</p>
                <div id="weather-engine-content">
                    <div class="loader-placeholder">Calculate a route in 'Plan Your Trip' to see weather insights.</div>
                </div>
            </div>
        </div>

        <!-- Option 6: Late Arrival Probability Score (LAPS) -->
        <div id="laps-card" class="card laps-card">
            <div class="card-header">
                <h3><i class="fas fa-exclamation-circle"></i> LAPS (Late Arrival Risk)</h3>
            </div>
            <div class="card-body">
                <p class="card-desc">Late Arrival Probability Score — risk assessment per hour.</p>
                <div id="laps-content">
                    <div class="loader-placeholder">Calculate a route in 'Plan Your Trip' to see arrival risks.</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}